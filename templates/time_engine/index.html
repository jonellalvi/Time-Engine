<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Time Engine</title>

    <!-- FullCalendar stylesheet -->
    <link rel='stylesheet' href='//cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.2.3/fullcalendar.min.css'/>

    <!-- Bootstrap Core CSS -->
    <link href="{% static 'time_engine/css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="{% static 'time_engine/css/shop-item.css' %}" rel="stylesheet">
    <link href="{% static 'time_engine/css/index.css' %}" rel="stylesheet">
    <link href="{% static 'time_engine/css/panels.css' %}" rel="stylesheet">

</head>

<body>

<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Time Engine</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse pull-right" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#">Help</a>
                </li>
                <li>
                    {% if registered %}
                        <a href="/time_engine/register">Login</a>
                    {% else %}
                        <a href="/time_engine/register">Register</a>
                    {% endif %}


                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">

    <!--<div class="row">-->
    <div class="col-md-12">
        <div class="thumbnail">
            <div class="row"> <!-- CALENDAR ROW -->
                <div>
                    {% if user.is_authenticated %}
                        <p>Time Engine says... hello {{ user.username }}!</p>
                        <a href="/time_engine/logout/">Logout</a><br/>
                    {% else %}
                        <p>Time Engine says... hello world!</p>
                    {% endif %}
                    {% if registered %}
                        <a href="/time_engine/login">Login</a>
                    {% comment %}
                    {% else %}
                        <a href="/time_engine/register">Register</a>
                    {% endcomment %}
                    {% endif %}
                </div>
                <div id="calendarContainer">

                </div>
            </div>
            <!-- END Calendar row -->
            <div class="row"> <!--  INSTRUCTIONS ROW -->
                <div class="caption-full">


                    <div class="text-left">
                        <!--<a class="btn btn-success" onclick="CC.ItemList.append();">+New</a>-->
                        <!--<a class="btn btn-primary" data-toggle="modal" data-target="#myModal">+New</a>-->
                        <!--<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
  New Timetable
</button>-->
                    </div>
                </div>
            </div>
            <!-- END Instructions row -->
            <div class="row">
                <!--{# {{ form.as_p }}  #}<!-- model forms -->
                <!--<button type="button" id="save_tt" class="btn btn-primary">Save changes</button>-->
                <!-- Basic form-->
               <!-- <div class="collapse" id="collapseExample">-->
                    <div class="well">
                        <form id="theForm" action="" method="post" class="">
                            {% csrf_token %}
                            {# Include the hidden fields #}
                            {% for hidden in form.hidden_fields %}
                                {{ hidden }}
                            {% endfor %}
                            {# Include the visible fields #}
                            {% for field in form.visible_fields %}
                               <div class="fieldWrapper">
                                    {# uncomment to display field errors #}
                                    {{field.errors }}
                                    {{ field.label_tag }} {{ field }}
                               </div>
                            {% endfor %}


                            <button id="reset">Reset</button>
                            <button id="run">Run</button>
                            {% if user.is_authenticated %}
                            <button id="save">Save</button>
                            {% else %}
                            <button id="save" disabled>Save</button>

                            {% endif %}
                        </form>
                    </div><!--.well-->
                </div><!--.collapse-->
            </div><!--row-->
            <div class="row" id="msg">
                <!--messages go here-->



<form id="newForm" class="form-horizontal">
    {% csrf_token %}
    <input class="save" id="id_save" name="save" type="hidden" />
    <div class="form-group">
        <label class="control-label col-xs-3" for="name">Name:</label>
        <div class="col-xs-9">
            <input type="text" class="form-control" id="name" placeholder="Time table name" maxlength="100" name="name">
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-xs-3">Color:</label>
        <div class="col-xs-2">
            <label class="radio-inline">
                <input type="radio" name="color" value="blue"> Blue
            </label>
        </div>
        <div class="col-xs-2">
            <label class="radio-inline">
                <input type="radio" name="color" value="green"> Green
            </label>
        </div>
        <div class="col-xs-2">
            <label class="radio-inline">
                <input type="radio" name="color" value="red"> Red
            </label>
        </div>
        <div class="col-xs-2">
            <label class="radio-inline">
                <input type="radio" name="color" value="yellow"> Yellow
            </label>
        </div>

    </div>

    <div class="form-group">
        <label class="control-label col-xs-3">Start Date:</label>
        <div class="col-xs-3">
            <select class="form-control" name="start_date_month">
                <option selected="selected">Month</option>
                <option value="1">January</option>
                <option value="2">February</option>
                <option value="3">March</option>
                <option value="4">April</option>
                <option value="5">May</option>
                <option value="6">June</option>
                <option value="7">July</option>
                <option value="8">August</option>
                <option value="9">September</option>
                <option value="10">October</option>
                <option value="11">November</option>
                <option value="12">December</option>
            </select>
        </div>
        <div class="col-xs-3">
            <select class="form-control" name="start_date_day">
                <option selected="selected">Date</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
                <option value="25">25</option>
                <option value="26">26</option>
                <option value="27">27</option>
                <option value="28">28</option>
                <option value="29">29</option>
                <option value="30">30</option>
                <option value="31">31</option>
            </select>
        </div>

        <div class="col-xs-3">
            <select class="form-control" name="start_date_year">
                <option selected="selected">Year</option>
                <option value="2015">2015</option>
                <option value="2016">2016</option>
                <option value="2017">2017</option>
                <option value="2018">2018</option>
                <option value="2019">2019</option>
                <option value="2020">2020</option>
            </select>
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-xs-3">Start Time:</label>
            <div class="col-xs-2">
                <select class="form-control" name="start_time">
                    <option selected="selected">Time</option>
                    <option value="12:00">12:00am</option>
                    <option value="12:30">12:30am</option>
                    <option value="1:00">1:00am</option>
                    <option value="1:30">1:30am</option>
                    <option value="2:00">2:00am</option>
                    <option value="2:30">2:30am</option>
                    <option value="3:00">3:00am</option>
                    <option value="3:30">3:30am</option>
                    <option value="4:00">4:00am</option>
                    <option value="4:30">4:30am</option>
                    <option value="5:00">5:00am</option>
                    <option value="5:30">5:30am</option>
                    <option value="6:00">6:00am</option>
                    <option value="6:30">6:30am</option>
                    <option value="7:00">7:00am</option>
                    <option value="7:30">7:30am</option>
                    <option value="8:00">8:00am</option>
                    <option value="8:30">8:30am</option>
                    <option value="9:00">9:00am</option>
                    <option value="9:30">9:30am</option>
                    <option value="10:00">10:00am</option>
                    <option value="10:30">10:30am</option>
                    <option value="11:00">11:00am</option>
                    <option value="11:30">11:30am</option>
                    <option value="12:00">12:00pm</option>
                    <option value="12:30">12:30pm</option>
                    <option value="13:00">1:00pm</option>
                    <option value="13:30">1:30pm</option>
                    <option value="14:00">2:00pm</option>
                    <option value="14:30">2:30pm</option>
                    <option value="15:00">3:00pm</option>
                    <option value="15:30">3:30pm</option>
                    <option value="16:00">4:00pm</option>
                    <option value="16:30">4:30pm</option>
                    <option value="17:00">5:00pm</option>
                    <option value="17:30">5:30pm</option>
                    <option value="18:00">6:00pm</option>
                    <option value="18:30">6:30pm</option>
                    <option value="19:00">7:00pm</option>
                    <option value="19:30">7:30pm</option>
                    <option value="20:00">8:00pm</option>
                    <option value="20:30">8:30pm</option>
                    <option value="21:00">9:00pm</option>
                    <option value="21:30">9:30pm</option>
                    <option value="22:00">10:00pm</option>
                    <option value="22:30">10:30pm</option>
                    <option value="23:00">11:00pm</option>
                    <option value="23:30">11:30pm</option>
                </select>
            </div>
    </div>

    <div class="form-group">
        <label class="control-label col-xs-3" for="event_count">Total events:</label>
        <div class="col-xs-9">
            <input name="event_count" type="number" class="form-control" id="event_count" placeholder="Enter a number...">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-3">Available Days:</label>
        <div class="col-xs-1">
            <label class="checkbox-inline">
                <input type="checkbox" name="has_sunday" > S
            </label>
        </div>
        <div class="col-xs-1">
            <label class="checkbox-inline">
                <input type="checkbox" name="has_monday" > M
            </label>
        </div>
        <div class="col-xs-1">
            <label class="checkbox-inline">
                <input type="checkbox" name="has_tuesday" > T
            </label>
        </div>
        <div class="col-xs-1">
            <label class="checkbox-inline">
                <input type="checkbox" name="has_wednesday" > W
            </label>
        </div>
        <div class="col-xs-1">
            <label class="checkbox-inline">
                <input type="checkbox" name="has_thursday"> T
            </label>
        </div>
        <div class="col-xs-1">
            <label class="checkbox-inline">
                <input type="checkbox" name="has_friday"> F
            </label>
        </div>
        <div class="col-xs-1">
            <label class="checkbox-inline">
                <input type="checkbox" name="has_saturday" > S
            </label>
        </div>
    </div>

    <br>
    <div class="form-group">
        <div class="col-xs-offset-3 col-xs-9">
            <input type="submit" class="btn btn-primary" id='submit' value="Submit">
            <input type="reset" class="btn btn-default" value="Reset">
        </div>
    </div>
</form>








            </div>
            <!-- row for messages -->
            <div class="row" id="tt_list">
                <!--list of saved timetables goes here-->
            </div>
            <!-- row for saved timetables -->


        </div>
        <!-- END Thumbnail -->
    </div>
    <!-- END columns md 12 -->
    <!--</div>-->
</div>
<!-- /.container -->

<div class="container">

    <hr>

    <!-- Footer -->
    <footer>
        <div class="row">
            <div class="col-lg-12">
                <p>Copyright &copy; Jonell Alvi 2015</p>
            </div>
        </div>
    </footer>

</div><!-- /.container -->

<!-- JavaScript stuff -->
<!--my js-->
<script src="{% static 'time_engine/js/formvalidation.js' %}" type="text/javascript"></script>

<!--FullCalendar stylesheet and js files-->
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.4/moment.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.2.3/fullcalendar.min.js"></script>

<!-- Bootstrap js -->
<script src="{% static 'time_engine/js/bootstrap.min.js' %}"></script>

<!-- Custom js -->
<script src="{% static 'time_engine/js/panels.js' %}" type="text/javascript"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

<!-- the jquery Full Calendar -->
<script>
    $(document).ready(function () {
        $('#calendarContainer').fullCalendar({
            //options for fullCalendar go here.
        });

        //setting up the event handler for form submission
        $('#run, #save').on('click', function(e) {
            var form_stuff = $("#theForm").serialize();
            //console.log(form_stuff);
            if (e.target.id == 'run') {
                form_stuff += '&save=false';
            } else {
                form_stuff += '&save=true';
            }
            //return false;


            $.post("/time_engine/", form_stuff, function(data) {
                console.log(data);
                //clear fullCalendar of existing events.
                var cal = $('#calendarContainer');
                cal.fullCalendar('removeEvents');
                cal.fullCalendar('addEventSource', data);
            });
            return false;
        });
 //setting up the event handler for form submission
        $('#submit').on('click', function(e) {
            var form_stuff = $("#newForm").serialize();
            console.log(form_stuff);
            if (e.target.id == 'run') {
                form_stuff += '&save=false';
            } else {
                form_stuff += '&save=true';
            }
            //return false;


            $.post("/time_engine/", form_stuff, function(data) {
                console.log(data);
                //clear fullCalendar of existing events.
                var cal = $('#calendarContainer');
                cal.fullCalendar('removeEvents');
                cal.fullCalendar('addEventSource', data);
            });
            return false;
        });

    });
</script><!-- jquery Full Calendar -->

</body>

</html>
